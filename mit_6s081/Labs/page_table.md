## 简述

> page table，页表

页表的功能：将虚拟地址转换成物理地址

## 代码

在 `main()` 中设置内核空间页表的流程，如下：

1. 调用 `kvminit()` 设置内核空间页表的衡等映射

比如 `UART0` 的物理地址 `0x10000000L` 对应的虚拟地址也是 `0x10000000L`

2. 由于XV6采用三级页表的方式进行管理，调用 `kvminithart() -> w_satp()` 将第一级页表（根页表）的起始地址存储到`SATP`寄存器中，同时激活分页功能（Risc-V架构）

注意：
执行此指令之前，所有的地址都最物理地址
执行完此指令后，所有的地址都最虚拟地址

但是因为第一步将内核空间的页表设置成衡等映射，所以对内核空间来说，激活分页功能后，执行下一条指令没有影响

3. 调用 `kvminithart() -> sfence_vma()` 刷新 `TLB`
